@page "/"
@inject IProjectService ProjectService
@inject ILearningService LearningService
@inject IResourceService ResourceService

@inject IJSRuntime JS

<PageTitle>Home - Learning & Building in Public</PageTitle>


<!-- Hero Section -->
<section id="hero" class="hero">
    <div class="hero-content">
        <h1 class="hero-title">Welcome to My Learning Journey</h1>
        <p class="hero-subtitle">Join me as I explore new technologies, document my projects, and share my learning
            experiences.</p>
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" data-progress="50"></div>
            </div>
            <small class="hero-learning">Currently learning: User Story Writing, Stakeholder Management</small>
        </div>
        <div class="hero-cta">
            <a href="#projects" class="btn btn-primary">View Projects</a>
            <a href="#contact" class="btn btn-secondary">Get in Touch</a>
        </div>
    </div>
</section>

<!-- Projects Section -->
<section id="projects" class="projects-section">
    <div class="projects-header-centered">
        <h2 class="projects-title">Recent Projects</h2>
        <p class="projects-description">Each project is a learning experiment. I document the challenges, solutions, and
            lessons learned.</p>
    </div>
    @if (projects == null)
    {
        <div class="projects-loading">
            <p>Loading...</p>
        </div>
    }
    else if (!projects.Any())
    {
        <div class="projects-empty">
            <p>No projects yet.</p>
        </div>
    }
    else
    {
        <div class="projects-grid">
            @foreach (var project in projects)
            {
                <div class="project-card-wrapper">
                    <ProjectCard Project="project" />
                </div>
            }
        </div>
    }
    <div class="projects-footer">
        <a href="/projects" class="btn btn-primary mt-3">View All Projects</a>
    </div>
</section>

<!-- Blog Section -->
<section id="learning-section">
    <div class="section-header">
        <h2>Learning Journal</h2>
        <p>I write about what I learn, challenges I face, and solutions I discover. Learning in public helps solidify my
            understanding.</p>
    </div>
    <div class="learning-grid">
        @foreach (var learning in learnings!)
        {
            <div class="project-card-wrapper">
                <LearningCard Learning="learning" />
            </div>
        }
    </div>
    <div class="projects-footer">
        <a href="/learnings" class="btn btn-primary mt-3">View All Learnings</a>
    </div>
</section>

<!-- Resources Section -->

<section id="resources" class="projects-section">
    <div class="projects-header-centered">
        <h2 class="projects-title">Featured Resources</h2>
        <p class="projects-description">Curated resources to help you learn and build more effectively.</p>
    </div>
    @if (resources == null)
    {
        <div class="projects-loading">
            <p>Loading...</p>
        </div>
    }
    else if (!resources.Any())
    {
        <div class="projects-empty">
            <p>No resources yet.</p>
        </div>
    }
    else
    {
        <div class="projects-grid">
            @foreach (var resource in resources.Take(3))
            {
                <div class="project-card-wrapper">
                    <ResourceCard Resource="resource" />
                </div>
            }
        </div>
    }
    <div class="projects-footer">
        <a href="/resources" class="btn btn-primary mt-3">View All Resources</a>
    </div>
</section>


<!-- Contact Section -->
<section id="contact" class="projects-section">
    <div class="projects-header-centered">
        <h2 class="projects-title">Let's Connect</h2>
        <p class="projects-description">Interested in my learning journey? Want to discuss a project? I'm always open to
            conversations about technology, learning, and opportunities.</p>
    </div>
    <div class="contact-content">
        <div class="contact-form">
            <form>
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <input type="text" id="subject" name="subject" required>
                </div>
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea id="message" name="message" placeholder="Tell me about your project or just say hello!"
                        required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-send"></i>
                    Send Message
                </button>
            </form>
        </div>
    </div>
</section>


@code {
    private List<Project>? projects;
    private List<Learning>? learnings;
    private List<Resource>? resources;

    protected override async Task OnInitializedAsync()
    {
        projects = await ProjectService.GetProjectsAsync();
        learnings = await LearningService.GetLearningsAsync();
        resources = await ResourceService.GetResourcesAsync();
    }

    private async Task ScrollToContact()
    {
        await JS.InvokeVoidAsync("scrollToSection", "contact");
    }
}